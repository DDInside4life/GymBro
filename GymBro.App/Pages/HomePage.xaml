<Page x:Class="GymBro.App.Pages.HomePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:vm="clr-namespace:GymBro.App.ViewModels"
      Title="Домашняя страница">
    <Page.DataContext>
        <vm:HomePageViewModel />
    </Page.DataContext>

    <Grid Background="#F5F7FA">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="30">

                <!-- Приветствие и дата -->
                <StackPanel Margin="0,0,0,30">
                    <TextBlock Text="Добро пожаловать, Роман!"
                               FontSize="28"
                               FontWeight="SemiBold"
                               Foreground="#2C3E50"/>
                    <TextBlock Text="{Binding CurrentDate}"
                               FontSize="16"
                               Foreground="#7F8C8D"
                               Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Индикатор загрузки -->
                <Border Background="White" CornerRadius="15" Padding="20" Margin="0,0,0,20"
                        Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <TextBlock Text="Загрузка..." HorizontalAlignment="Center" FontSize="16"/>
                </Border>

                <!-- Предстоящая тренировка (если есть программа) -->
                <Border Background="White"
                        CornerRadius="15"
                        Padding="25"
                        Margin="0,0,0,30"
                        Visibility="{Binding HasProgram, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel>
                        <TextBlock Text="📅 Предстоящая тренировка"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Foreground="#2C3E50"
                                   Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding ProgramName}" 
                                   FontSize="18" FontWeight="SemiBold" Foreground="#3498DB"
                                   Margin="0,0,0,20"/>

                        <ListView ItemsSource="{Binding Exercises}"
                                  BorderThickness="0">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Border Padding="15" 
                                            BorderBrush="#ECF0F1" 
                                            BorderThickness="0,0,0,1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="{Binding Name}"
                                                           FontSize="16"
                                                           FontWeight="SemiBold"
                                                           Foreground="#2C3E50"/>
                                                <TextBlock Text="{Binding SetsReps}"
                                                           FontSize="14"
                                                           Foreground="#7F8C8D"/>
                                                <TextBlock Text="{Binding EquipmentString}"
                                                           FontSize="12"
                                                           Foreground="#7F8C8D"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>

                <!-- Заглушка, если нет программы -->
                <Border Background="White"
                        CornerRadius="15"
                        Padding="25"
                        Margin="0,0,0,30"
                        Visibility="{Binding HasProgram, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
                    <TextBlock Text="У вас пока нет активных тренировочных программ. Перейдите в раздел 'Программы', чтобы создать или выбрать программу."
                               FontSize="14" Foreground="#7F8C8D" TextWrapping="Wrap"/>
                </Border>

                <!-- Советы и рекомендации -->
                <Border Background="White"
                        CornerRadius="15"
                        Padding="25">
                    <StackPanel>
                        <TextBlock Text="💡 Советы от GymBro"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Foreground="#2C3E50"
                                   Margin="0,0,0,20"/>

                        <StackPanel>
                            <Border Padding="15" 
                                    Background="#F8F9FA"
                                    CornerRadius="10"
                                    Margin="0,0,0,10">
                                <TextBlock Text="• Увеличьте потребление воды до 3 литров в день для улучшения восстановления"
                                           FontSize="14"
                                           Foreground="#2C3E50"/>
                            </Border>
                            <Border Padding="15" 
                                    Background="#F8F9FA"
                                    CornerRadius="10"
                                    Margin="0,0,0,10">
                                <TextBlock Text="• Не забывайте о разминке перед тренировкой для предотвращения травм"
                                           FontSize="14"
                                           Foreground="#2C3E50"/>
                            </Border>
                            <Border Padding="15" 
                                    Background="#F8F9FA"
                                    CornerRadius="10">
                                <TextBlock Text="• Записывайте свои рабочие веса для отслеживания прогресса"
                                           FontSize="14"
                                           Foreground="#2C3E50"/>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>